(function(h,e,f){var i=f.View.prototype._configure,h=f.View.extend({_configure:function(b){i.call(this,b);b&&b.viewModel&&(this.viewModel=b.viewModel)}}),j=f.Model.extend({model:null,isNew:function(){return this.model.isNew()},properties:{},_setAttribute:f.Model.prototype.set,read:function(b,d){var a=this.properties[b],a=a.read?e.isFunction(a.read)?a.read.call(this,b):this.model.get(a.read):this.model.get(b);this._setAttribute(b,a,d);return a},_doSet:function(b,d,a){var c=this.properties[b];if(c.validate&&
e.isFunction(c.validate)){var g=c.validate(d);if(g)return a.error?a.error(this,g,a):this.trigger("error",this,g,a),!1}(a=c.write?e.isFunction(c.write)?c.write.call(this,d,a):this.model.set(c.write,d,a):!0)&&this._setAttribute(b,d);return a},constructor:function(b){var d={},a=this;this.model=b;this._escapedAttributes={};this.cid=e.uniqueId("c");this.changed={};this._silent={};this._pending={};this.attributes={};this.initialize.apply(this,arguments);e.each(this.properties,function(a,b){d[b]=a.initial});
this._setAttribute(d,{silent:!0});e.each(this.properties,function(c,g){d[g]=e.isFunction(c.read)&&c.read.call(a,g)||e.isString(c.read)&&b.attributes[c.read]||b.attributes[g]||c.initial;var f=function(){this.read(g,{silent:!0})};if(e.isArray(c.change))e.each(c.change,function(b){a.model.on("change:"+b,f,a)});else if(c.change)a.model.on("change:"+c.change,f,a);else a.model.on("change:"+g,f,a)});this._setAttribute(d,{silent:!0});this.model.on("change",function(){this.trigger("change")},this);this.model.on("error",
function(a,b,d){this.trigger("error",a,b,d)},this);this.changed={};this._silent={};this._pending={};this._previousAttributes=e.clone(this.attributes)},set:function(b,d,a){a=a||{};return!b||!this.properties[b]?!1:this._doSet(b,d,a)},get:function(b){return this.attributes[b]},save:function(){return this.model.save()}});f.View=h;f.ViewModel=j})(jQuery,_,Backbone);
