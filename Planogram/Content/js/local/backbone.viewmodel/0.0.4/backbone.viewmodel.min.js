(function(h,f,g){var i=g.View.prototype._configure,h=g.View.extend({_configure:function(b){i.call(this,b);b&&b.viewModel&&(this.viewModel=b.viewModel)}}),j=g.Model.extend({model:null,isNew:function(){return this.model.isNew()},properties:{},_setAttribute:g.Model.prototype.set,read:function(b,d){var a=this.properties[b],a=a.read?f.isFunction(a.read)?a.read.call(this,b):this.model.get(a.read):this.model.get(b);this._setAttribute(b,a,d);return a},_doSet:function(b,d,a){var c=this.properties[b];if(c.validate&&
f.isFunction(c.validate)){var e=c.validate(d);if(e)return a.error?a.error(this,e,a):this.trigger("error",this,e,a),!1}((c=c.write?f.isFunction(c.write)?c.write.call(this,d,a):this.model.set(c.write,d,a):!0)||""===c)&&this._setAttribute(b,d,a);return c},constructor:function(b){var d={},a=this;this.model=b;this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent={};this._pending={};this.attributes={};this.initialize.apply(this,arguments);f.each(this.properties,function(a,b){d[b]=
a.initial});this._setAttribute(d,{silent:!0});f.each(this.properties,function(c,e){f.isFunction(c.read)?d[e]=c.read.call(a,e):b.attributes&&(d[e]=f.isString(c.read)?b.attributes[c.read]:b.attributes[e]);void 0===d[e]&&(d[e]=c.initial);var g=function(){this.read(e,{silent:true})};if(f.isArray(c.change))f.each(c.change,function(b){a.model.on("change:"+b,g,a)});else if(c.change)a.model.on("change:"+c.change,g,a);else a.model.on("change:"+e,g,a)});this._setAttribute(d,{silent:!0});this.model.on("change",
function(){this.trigger("change")},this);this.model.on("error",function(a,b,d){this.trigger("error",a,b,d)},this);this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes)},set:function(b,d,a){a=a||{};return!b||!this.properties[b]?!1:this._doSet(b,d,a)},get:function(b){return this.attributes[b]},save:function(){return this.model.save()}});g.View=h;g.ViewModel=j})(jQuery,_,Backbone);
